---
title: Orangewood Simulation Stack
sidebar_position: 1
description: >-
  This document has a simulation packages and MoveIt! config of Orangewood indigenous OWL 6.5 Robot. It is also including orangewood sdk examples.

---

This document has a simulation packages and MoveIt! config of Orangewood indigenous OWL 6.5 Robot. It is also including orangewood sdk examples.

### Setting Orangewood Simulation
We offer two methods to test and work with simulation

1. Setup in your host Ubuntu 20.04.6 machine
2. Setup Using **[Docker](../guides/sim-stack/setup-docker)**

For Host PC setup, follow the instructions below

### 1) Setting Simulation in HOST PC
**Prerequesities**
- [Ubuntu 20.04.6 LTS](https://releases.ubuntu.com/focal/)
- [ROS Noetic Full Desktop Full](https://wiki.ros.org/noetic/Installation/Ubuntu), you can also use [Single line installation](https://github.com/qboticslabs/ros_install_noetic) which is given below

ROS Noetic Single Line Installation

``` bash
wget -c https://raw.githubusercontent.com/orangewood-co/orangewood_sim_stack/main/host_pc_scripts/ros_install_noetic.sh && chmod +x ./ros_install_noetic.sh && ./ros_install_noetic.sh
```

After installing ROS Noetic in the host PC, we can setup a ROS workspacwe to build the sim packages.
```
mkdir -p ~/orangewood_ws/src

cd ~/orangewood_ws/src

git clone https://github.com/orangewood-co/orangewood_sim_stack.git

cd ~/orangewood_ws

#Installing depdencies 

rosdep install --from-paths src --ignore-src -r -y

#Building packages

catkin_make -j1

echo "source ~/orangewood_ws/devel/setup.bash" >> /home/$USER/.bashrc

source /home/$USER/.bashrc
```

### üìÅ Repository File Structure
<img 
  src={require('../../../static/img/tree.png').default} 
  alt="Orangewood Simulation Setup"
  style={{ float: 'left', marginRight: '20px', marginBottom: '20px' }} 
/>

<div style={{ clear: 'both' }}></div>

### ü§ñ Running Instructiion: OWL 6.5 Robot
After setting the repository, you can run the Gazebo simulation

**Terminal 1:**
Eg. Start Gazebo simulation of OWL 6.5 + Robotiq 2F 85 Gripper

```bash
roslaunch owl_bringup bringup.launch gripper:=robotiq2f85 world:=table camera:=on sim:=on time:=5
```

### Gripper Options
Here are the list of options for the gripper:

1. **Pneumatic**
2. **Vacuum**
3. **Robotiq2f85**

### World Options
Here are the list of options for the world:

1. **Empty**
2. **Stand**
3. **Table**

### Camera Options
Here are the options for the camera:

1. **On**
2. **Off**

### Simulation Options
Here are the options for simulation. This option enables or disables Gazebo and only runs MoveIt config in fake mode:

1. **On**
2. **Off**

### Time Options
Here are the options for time.

This time is when to start MoveIt config after launching the simulation. If you don't want Gazebo simulation, you can set `sim` as "off" and `time` as 0. If you are starting the simulation, it's better to have a value from 5 to 10. The value is in seconds.


<img 
  src={require('../../../static/img/simulation.jpeg').default} 
  alt="Orangewood Simulation Setup"
  style={{ float: 'left', marginRight: '20px', marginBottom: '20px' }} 
/>

<div style={{ clear: 'both' }}></div>
---
<br/>

### 2) Setting Orangewood simulation on Docker
In order to setup Docker in your machine, first clone the orangewood simstack in your host machine

``` bash
mkdir -p ~/orangewood_ws/src

cd ~/orangewood_ws/src

git clone https://github.com/orangewood-co/orangewood_sim_stack.git

cd ~/orangewood_ws/src/orangewood_simstack/docker/
```

### ‚öíÔ∏è Install Docker in Host Machine
```bash
orangewood_simstack/docker$ ./setup_host_machine.sh
```
It will take some time to install Docker and NVIDIA Container toolkit

After installing everything, do a REBOOT of your PC

### ‚öôÔ∏è Build or Pull Docker Image of Orangewood Simulation
We have two option to get the docker image for simulation,

  - Building a new image.
  - Download/Pull an image from Docker Hub.

:::info note
Building a new docker image will take time, if you have good configuration PC, you can do that, othervice you can go with pulling from docker hub. It require ~4GB of download
:::

- Building a new Image
```bash
orangewood_simstack/docker$ ./build_image.bash
```
- Pulling existing image from **[Docker Hub](https://hub.docker.com/r/orangewoodlabs/orangewood_sim)**
```bash
docker pull orangewoodlabs/orangewood_sim
```

### üöÄ Run Docker for running simulation
After building/downloading image, you can run it using following command
```bash
#For build image
orangewood_simstack/docker$ ./run_image.bash orangewood_sim_image

#For pulled image
orangewood_simstack/docker$ ./run_image.bash orangewoodlabs/orangewood_sim
```

After getting the terminal, follow the commands to build the ROS package and install depdencies

```bash
#Upgrading to latest owl_robot_sdk
root@025d7e913e06:/home/robot/orangewood_ws$ pip install owl-robot-sdk --upgrade


# Install depedencies
root@025d7e913e06:/home/robot/orangewood_ws$ rosdep install --from-paths src --ignore-src -r -y


#Building packages
root@025d7e913e06:/home/robot/orangewood_ws$ catkin_make -j1


#Source workspace
root@025d7e913e06:/home/robot/orangewood_ws$ source devel/setup.bash


# Run OWL 6.5 Simulation
roslaunch owl_bringup bringup.launch gripper:=robotiq2f85 world:=stand  camera:=on sim:=on time:=5
```

<img 
  src={require('../../../static/img/sim.png').default} 
  alt="Orangewood Simulation Setup"
  style={{ float: 'left', marginRight: '20px', marginBottom: '20px' }} 
/>

You can take next docker session from next host terminal. Switch to docker folder and execute the following command

```bash
orangewood_simstack/docker$ ./new_sim_session.bash

root@025d7e913e06:/home/robot/orangewood_ws$ source devel/setup.bash

## Testing SDK Example
root@025d7e913e06:/home/robot/orangewood_ws$ cd owl/owl_robot_sdk_examples/

root@025d7e913e06:/home/robot/orangewood_ws/owl/owl_robot_sdk_examples$ python3 api_test.py
```
<head>
  <title>Orangewood Simulation Stack</title>
  <meta
    name="description"
    content="Simulation packages, MoveIt! configuration, and SDK examples for the Orangewood Indigenous OWL 6.5 Robot."
  />
</head>
